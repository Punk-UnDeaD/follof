{% extends 'base.html.twig' %}

{% block title %}Team members{% endblock %}
{% block body %}
    <table class="table">
        <thead>
        <tr>
            <th scope="col">#
            <th scope="col">Login
            <th scope="col">Role
            <th scope="col">Status
        <tbody>
        {% for member in members %}
        <tr>
            <th scope="row">{{ member.id }}
            <td>{{ member.login }}
            <td>{{ member.role.name }}

            <td><label class="switch switch-label switch-pill switch-success">
                    <input type="checkbox" class="switch-input" {{ member.active?"checked" }}
                           is="x-auto-toggler"
                           data-on="{{ path('billing.team.member.activate', {member: member.id }) }}"
                           data-off="{{ path('billing.team.member.block', {member: member.id }) }}"
                           data-csrf="{{ csrf_token("billing.team.member.toggle") }}"
                    >
                    <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
                </label>

                {% if member.active %}
                    <form action="{{ path('billing.team.member.block', {member: member.id }) }}" method="POST">
                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('billing.team.member.block') }}">
                        <button class="btn btn-primary" name="op" value="block">Block</button>
                    </form>
                {% else %}
                    <form action="{{ path('billing.team.member.activate', {member: member.id }) }}" method="POST">
                        <input type="hidden" name="_csrf_token"
                               value="{{ csrf_token("billing.team.member.activate") }}">
                        <button class="btn btn-primary" name="op" value="activate">Activate</button>
                    </form>
                {% endif %}
                {% endfor %}
    </table>
    <div class="actions">
        <form action="{{ path('billing.team.addMember') }}" method="POST">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('b.t.a') }}">
            <button class="btn btn-primary" name="op" value="add">Add</button>
        </form>
    </div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    {{ encore_entry_script_tags('x-auto-toggler') }}
{% endblock %}